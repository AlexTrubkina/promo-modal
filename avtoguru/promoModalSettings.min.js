const promoModalContainer=document.querySelector(".promo-modal-container"),promoModal=document.querySelector(".promo-modal"),promoModalFormContainer=document.querySelector(".promo-modal-form-container"),successMessage=document.querySelector(".enroll-success"),promoModalButtons=document.querySelectorAll(".promo-modal-btn");let deltaTime,visitDate=(new Date).toISOString();window.addEventListener("DOMContentLoaded",e=>{function t(){"ontouchstart"in window&&0!==navigator.maxTouchPoints&&0!==navigator.msMaxTouchPoints||!(document.body.scrollHeight>window.innerHeight)||document.body.classList.add("hide-body-scroll")}function o(){let e=(new Date).toISOString();deltaTime=Math.abs(new Date(localStorage.getItem("whenPromoModalWasShown"))-new Date(e)),localStorage.getItem("whenPromoModalWasShown")?deltaTime>864e5&&(promoModalContainer.classList.remove("hidden"),t(),localStorage.setItem("whenPromoModalWasShown",(new Date).toISOString())):(promoModalContainer.classList.remove("hidden"),t(),localStorage.setItem("whenPromoModalWasShown",(new Date).toISOString()))}function n(){promoModalContainer.classList.add("hidden"),promoModalFormContainer.classList.remove("hidden"),successMessage.classList.add("hidden"),document.body.classList.remove("hide-body-scroll")}setTimeout(o,1e4),promoModalContainer.addEventListener("click",e=>{e.target===promoModalContainer&&n()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&n()}),document.addEventListener("mouseleave",o),document.querySelector(".promo-modal-close-button").addEventListener("click",e=>{n()}),promoModalButtons.forEach(e=>{e.addEventListener("click",()=>{promoModalContainer.classList.remove("hidden"),t()})})});const submitButton=document.querySelector(".promo-modal-form-btn"),nameInput=document.querySelector("#name"),telInput=document.querySelector("#mobile"),warning=document.querySelector(".enroll-warning"),mobileRegex=/\(\d{3}\)\s\d{3}-\d{2}-\d{2}/;submitButton.onclick=(e=>{e.preventDefault(),""!==nameInput.value&&mobileRegex.test(telInput.value)?(warning.classList.add("hidden"),promoModalFormContainer.classList.add("hidden"),successMessage.classList.remove("hidden"),nameInput.value="",telInput.value=""):warning.classList.remove("hidden")});const getInputNumbersValue=e=>e.value.replace(/\D/g,""),onPhoneInput=e=>{let t=e.target,o=getInputNumbersValue(t),n=t.selectionStart,a="";if(!o)return t.value="";if(t.value.length!=n)return void(e.data&&/\D/g.test(e.data)&&(t.value=o));"7"!==o[0]&&"8"!==o[0]&&(o="7"+o);const r=o[0]="+7";a=t.value=r+" ",o.length>1&&(a+="("+o.substring(1,4)),o.length>=5&&(a+=") "+o.substring(4,7)),o.length>=8&&(a+="-"+o.substring(7,9)),o.length>=10&&(a+="-"+o.substring(9,11)),t.value=a},onPhonePaste=e=>{let t=e.target,o=getInputNumbersValue(t);const n=e.clipboardData||window.Ð¡lipboardData;if(n){const e=n.getData("Text");if(/\D/g.test(e))return void(t.value=o)}};telInput.addEventListener("input",onPhoneInput),telInput.addEventListener("paste",onPhonePaste);